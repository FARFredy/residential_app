<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ResidencialApp - Intercomunicador</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-color: #3F51B5;
      --secondary-color: #00BCD4;
      --accent-color: #FF4081;
      --background-color: #F5F5F5;
      --text-color: #212121;
      --success-color: #4CAF50;
      --error-color: #F44336;
      --warning-color: #FF9800;
    }
    
    body {
      font-family: 'Roboto', 'Open Sans', sans-serif;
      background-color: var(--background-color);
      color: var(--text-color);
    }
    
    .app-container {
      padding: 1rem;
      max-width: 100%;
      margin: 0 auto;
      height: 100%;
    }
    
    .card {
      background-color: white;
      border-radius: 16px;
      padding: 16px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
      margin-bottom: 16px;
    }
    
    .tab-active {
      color: var(--primary-color);
      border-bottom: 2px solid var(--primary-color);
      font-weight: 500;
    }
    
    .dial-pad {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
    }
    
    .dial-button {
      background-color: white;
      border-radius: 12px;
      padding: 10px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      border: 1px solid #e2e8f0;
      transition: all 0.2s;
      aspect-ratio: 1;
    }
    
    .dial-button:active {
      background-color: #f3f4f6;
      transform: scale(0.95);
    }
    
    .action-button {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .call-controls {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
    }
    
    .call-button {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .slide-in {
      animation: slideIn 0.3s ease-out;
    }
    
    @keyframes slideIn {
      from {
        transform: translateY(20px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <!-- Header -->
    <div class="flex justify-between items-center mb-6 slide-in">
      <div class="flex items-center">
        <a href="porter-home.html" class="mr-2">
          <i class="fas fa-arrow-left text-gray-700"></i>
        </a>
        <h1 class="text-xl font-bold">Intercomunicador</h1>
      </div>
    </div>
    
    <!-- Tabs -->
    <div class="flex border-b border-gray-200 mb-6 slide-in">
      <button class="pb-2 px-4 tab-active">Marcar</button>
      <button class="pb-2 px-4 text-gray-500">Directorio</button>
      <button class="pb-2 px-4 text-gray-500">Recientes</button>
    </div>
    
    <!-- Search/Input Field -->
    <div class="mb-6 slide-in" style="animation-delay: 0.1s;">
      <div class="flex items-center bg-white rounded-lg overflow-hidden mb-2 border border-gray-300">
        <div class="px-3 py-3 text-center text-xl font-medium">
          <span id="dialDisplay">Torre: A Apto: </span><span id="numberDisplay">_</span>
        </div>
        <button onclick="clearInput()" class="ml-auto px-4 text-gray-500">
          <i class="fas fa-backspace"></i>
        </button>
      </div>
    </div>
    
    <!-- Dial Pad -->
    <div class="dial-pad slide-in" style="animation-delay: 0.15s;">
      <button class="dial-button" onclick="appendNumber('1')">
        <span class="text-xl font-medium">1</span>
      </button>
      <button class="dial-button" onclick="appendNumber('2')">
        <span class="text-xl font-medium">2</span>
        <span class="text-xs text-gray-400">ABC</span>
      </button>
      <button class="dial-button" onclick="appendNumber('3')">
        <span class="text-xl font-medium">3</span>
        <span class="text-xs text-gray-400">DEF</span>
      </button>
      
      <button class="dial-button" onclick="appendNumber('4')">
        <span class="text-xl font-medium">4</span>
        <span class="text-xs text-gray-400">GHI</span>
      </button>
      <button class="dial-button" onclick="appendNumber('5')">
        <span class="text-xl font-medium">5</span>
        <span class="text-xs text-gray-400">JKL</span>
      </button>
      <button class="dial-button" onclick="appendNumber('6')">
        <span class="text-xl font-medium">6</span>
        <span class="text-xs text-gray-400">MNO</span>
      </button>
      
      <button class="dial-button" onclick="appendNumber('7')">
        <span class="text-xl font-medium">7</span>
        <span class="text-xs text-gray-400">PQRS</span>
      </button>
      <button class="dial-button" onclick="appendNumber('8')">
        <span class="text-xl font-medium">8</span>
        <span class="text-xs text-gray-400">TUV</span>
      </button>
      <button class="dial-button" onclick="appendNumber('9')">
        <span class="text-xl font-medium">9</span>
        <span class="text-xs text-gray-400">WXYZ</span>
      </button>
      
      <button class="dial-button" onclick="appendNumber('*')">
        <span class="text-xl font-medium">*</span>
      </button>
      <button class="dial-button" onclick="appendNumber('0')">
        <span class="text-xl font-medium">0</span>
        <span class="text-xs text-gray-400">+</span>
      </button>
      <button class="dial-button" onclick="appendNumber('#')">
        <span class="text-xl font-medium">#</span>
      </button>
    </div>
    
    <!-- Call Button -->
    <div class="flex justify-center mt-6 mb-8 slide-in" style="animation-delay: 0.2s;">
      <button id="callButton" class="action-button bg-green-500 text-white" onclick="startCall()">
        <i class="fas fa-phone-alt text-2xl"></i>
      </button>
    </div>
    
    <!-- Frequently Called -->
    <h2 class="font-semibold mb-3 slide-in" style="animation-delay: 0.25s;">Llamadas frecuentes</h2>
    
    <div class="grid grid-cols-1 gap-3 slide-in" style="animation-delay: 0.25s;">
      <div class="card flex items-center" onclick="quickDial('A102')">
        <div class="bg-blue-100 h-12 w-12 rounded-full flex items-center justify-center text-blue-600 mr-3">
          <i class="fas fa-home"></i>
        </div>
        <div>
          <h3 class="font-medium">Torre A - Apto 102</h3>
          <p class="text-sm text-gray-500">Familia Martínez</p>
        </div>
        <button class="ml-auto bg-gray-100 h-10 w-10 rounded-full flex items-center justify-center text-green-600">
          <i class="fas fa-phone-alt"></i>
        </button>
      </div>
      
      <div class="card flex items-center" onclick="quickDial('B304')">
        <div class="bg-purple-100 h-12 w-12 rounded-full flex items-center justify-center text-purple-600 mr-3">
          <i class="fas fa-home"></i>
        </div>
        <div>
          <h3 class="font-medium">Torre B - Apto 304</h3>
          <p class="text-sm text-gray-500">Ana Gómez</p>
        </div>
        <button class="ml-auto bg-gray-100 h-10 w-10 rounded-full flex items-center justify-center text-green-600">
          <i class="fas fa-phone-alt"></i>
        </button>
      </div>
      
      <div class="card flex items-center" onclick="quickDial('C501')">
        <div class="bg-amber-100 h-12 w-12 rounded-full flex items-center justify-center text-amber-600 mr-3">
          <i class="fas fa-home"></i>
        </div>
        <div>
          <h3 class="font-medium">Torre C - Apto 501</h3>
          <p class="text-sm text-gray-500">Familia Rodríguez</p>
        </div>
        <button class="ml-auto bg-gray-100 h-10 w-10 rounded-full flex items-center justify-center text-green-600">
          <i class="fas fa-phone-alt"></i>
        </button>
      </div>
    </div>
    
    <!-- Call in Progress (hidden initially) -->
    <div id="callInProgress" class="hidden fixed inset-0 bg-gray-900 bg-opacity-95 z-50 flex flex-col items-center justify-between p-6">
      <div class="flex-1"></div>
      
      <div class="text-center">
        <h2 id="callingDisplay" class="text-white text-xl font-semibold mb-2">Llamando a Torre A - Apto 102</h2>
        <p class="text-gray-300 mb-8">Familia Martínez</p>
        
        <div class="bg-gray-800 bg-opacity-50 rounded-full w-28 h-28 mx-auto flex items-center justify-center mb-8">
          <i class="fas fa-building text-5xl text-white opacity-75"></i>
        </div>
        
        <div class="text-white mb-4">
          <div class="text-center text-sm mb-2">Llamada en curso</div>
          <div id="callTimer" class="text-2xl font-medium">00:00</div>
        </div>
      </div>
      
      <div class="call-controls mb-6">
        <button class="call-button bg-gray-800 text-white">
          <i class="fas fa-microphone-slash"></i>
        </button>
        <button class="call-button bg-red-500 text-white" onclick="endCall()">
          <i class="fas fa-phone-alt transform rotate-135"></i>
        </button>
        <button class="call-button bg-gray-800 text-white">
          <i class="fas fa-volume-up"></i>
        </button>
      </div>
    </div>
  </div>
  
  <script>
    let currentNumber = '';
    
    function appendNumber(num) {
      if (currentNumber.length < 4) {
        currentNumber += num;
        updateDisplay();
      }
    }
    
    function clearInput() {
      currentNumber = '';
      updateDisplay();
    }
    
    function updateDisplay() {
      document.getElementById('numberDisplay').textContent = currentNumber || '_';
    }
    
    function quickDial(number) {
      currentNumber = number.substring(1); // Remove the tower letter
      let tower = number.substring(0, 1);
      document.getElementById('dialDisplay').textContent = `Torre: ${tower} Apto: `;
      updateDisplay();
      startCall();
    }
    
    function startCall() {
      if (currentNumber) {
        const tower = document.getElementById('dialDisplay').textContent.includes('Torre: A') ? 'A' : 
                     document.getElementById('dialDisplay').textContent.includes('Torre: B') ? 'B' : 'C';
        
        // Show calling screen
        document.getElementById('callingDisplay').textContent = `Llamando a Torre ${tower} - Apto ${currentNumber}`;
        document.getElementById('callInProgress').classList.remove('hidden');
        
        // Start call timer
        let seconds = 0;
        window.callInterval = setInterval(() => {
          seconds++;
          const mins = Math.floor(seconds / 60).toString().padStart(2, '0');
          const secs = (seconds % 60).toString().padStart(2, '0');
          document.getElementById('callTimer').textContent = `${mins}:${secs}`;
        }, 1000);
      }
    }
    
    function endCall() {
      document.getElementById('callInProgress').classList.add('hidden');
      clearInterval(window.callInterval);
      document.getElementById('callTimer').textContent = '00:00';
    }
  </script>
</body>
</html>